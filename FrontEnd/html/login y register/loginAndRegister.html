<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-XSS-Protection" content="1; mode=block">
        <meta http-equiv="Content-Security-Policy" content="
        default-src 'self'; 
        script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/; 
        style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; 
        font-src 'self' https://cdnjs.cloudflare.com data:; 
        img-src 'self' data:; 
        frame-src https://www.google.com/ https://www.google.com/recaptcha/ https://www.gstatic.com/; 
        connect-src 'self' http://localhost:8080 http://localhost:5501 http://172.30.7.71:8080 http://172.30.7.71:5501 https://www.google.com https://www.gstatic.com;">
              <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.7.3/sweetalert2.all.min.js"></script>
        <link rel="stylesheet" href="../../css/security.css">
        <script src="https://www.google.com/recaptcha/api.js?render=6Lcy8x4rAAAAAKSfqVFXEkhNz_IsFIb_iCn5qOwy"></script>
    </head>
<body class="bg-gray-100 font-sans">

    <div class="auth-container min-h-screen flex flex-col md:flex-row">
        <!-- Left Section - Branding -->
        <div class="md:w-1/2 bg-green-800 text-white p-8 flex flex-col justify-center items-center hidden md:flex">
            <div class="max-w-md animate-slide-in">
                <div class="mb-8 text-center">
                    <i class="fas fa-leaf text-6xl mb-4 text-green-300"></i>
                    <h1 class="text-4xl font-bold mb-2">Wild Flavor</h1>
                    <p class="text-xl text-green-200">Sabores naturales, experiencias extraordinarias</p>
                </div>
                
                <div class="space-y-6">
                    <div class="flex items-start">
                        <i class="fas fa-utensils mt-1 mr-4 text-green-300"></i>
                        <div>
                            <h3 class="font-semibold text-lg">Ingredientes Frescos</h3>
                            <p class="text-green-200">Cada plato está preparado con los mejores ingredientes naturales.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <i class="fas fa-chart-line mt-1 mr-4 text-green-300"></i>
                        <div>
                            <h3 class="font-semibold text-lg">Atención Personalizada</h3>
                            <p class="text-green-200">Un servicio cálido y amable para que disfrutes cada visita.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <i class="fas fa-users mt-1 mr-4 text-green-300"></i>
                        <div>
                            <h3 class="font-semibold text-lg">Experiencia Única</h3>
                            <p class="text-green-200">Sabores que enamoran, momentos que perduran.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Section - Authentication Forms -->
        <div class="md:w-1/2 flex justify-center items-center p-8">
            <div class="auth-form-container w-full max-w-md rounded-lg shadow-lg p-8 animate-fade-in">
                <div class="mb-8">
                    <div class="flex justify-center mb-4 md:hidden">
                        <i class="fas fa-leaf text-4xl text-green-800"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-center text-gray-800 md:hidden">Wild Flavor</h2>
                    
                    <!-- Tabs -->
                    <div class="flex rounded-lg overflow-hidden border border-gray-200 mt-6">
                        <button id="login-tab" class="tab-btn active flex-1 py-3 font-medium text-center transition-colors focus:outline-none">
                            <i class="fas fa-sign-in-alt mr-2"></i> Iniciar Sesión
                        </button>
                        <button id="register-tab" class="tab-btn flex-1 py-3 font-medium text-center transition-colors focus:outline-none bg-gray-200 text-gray-700">
                            <i class="fas fa-user-plus mr-2"></i> Registrarse
                        </button>
                    </div>
                </div>
                
                <!-- Login Form -->
                <form id="login-form" class="space-y-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="usernameOrEmail">
                            Correo electrónico o Usuario
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-envelope"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="usernameOrEmail" type="text" placeholder="tu@correo.com o nombre de usuario" 
                                autocomplete="username" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="password">
                            Contraseña
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-lock"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="password" type="password" placeholder="Tu contraseña" 
                                autocomplete="current-password" required>
                            <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 focus:outline-none" id="toggle-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input class="h-4 w-4 text-green-800 focus:ring-green-500 border-gray-300 rounded" type="checkbox" id="remember-me">
                            <label class="ml-2 block text-sm text-gray-700" for="remember-me">
                                Recordarme
                            </label>
                        </div>
                        <a href="#" class="text-sm text-green-800 hover:text-green-700">¿Olvidaste tu contraseña?</a>
                    </div>

                    <!-- reCAPTCHA v3 invisible -->
                    <div id="recaptcha-container"></div>
                    <input type="hidden" id="recaptcha-token" name="recaptcha-token">
                    
                    <button type="submit" class="btn-wild w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none">
                        <i class="fas fa-sign-in-alt mr-2"></i>
                        Iniciar Sesión
                    </button>
                </form>
                
                <!-- Register Form (Hidden by default) -->
                <form id="register-form" class="space-y-4 hidden">
                    <!-- Role Selection -->
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-semibold mb-3">
                            Selecciona tu rol
                        </label>
                        <div class="grid grid-cols-2 gap-4">
                            <button type="button" id="role-client" class="role-btn active flex flex-col items-center justify-center p-4 rounded-lg bg-white">
                                <i class="fas fa-user-circle text-3xl mb-2 text-green-700"></i>
                                <span class="font-medium">Cliente</span>
                                <p class="text-xs text-gray-500 mt-1">Ordena comida y reserva mesas</p>
                            </button>
                            <button type="button" id="role-staff" class="role-btn flex flex-col items-center justify-center p-4 rounded-lg bg-white">
                                <i class="fas fa-user-tie text-3xl mb-2 text-green-700"></i>
                                <span class="font-medium">Personal</span>
                                <p class="text-xs text-gray-500 mt-1">Accede al sistema de gestión</p>
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-2" for="first-name">
                                Nombre
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-user"></i>
                                </span>
                                <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                    id="first-name" type="text" placeholder="Nombre" autocomplete="given-name" required 
                                    pattern="^[\p{L} .'\\-]+$" title="Solo letras y espacios">
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-2" for="last-name">
                                Apellido
                            </label>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none" 
                                id="last-name" type="text" placeholder="Apellido" autocomplete="family-name" required 
                                pattern="^[\p{L} .'\\-]+$" title="Solo letras y espacios">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="username">
                            Nombre de usuario
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-user-tag"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="username" type="text" placeholder="Nombre de usuario" autocomplete="username" required 
                                pattern="^[a-zA-Z0-9._-]+$" title="Solo letras, números, puntos, guiones y guiones bajos">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="register-email">
                            Correo electrónico
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-envelope"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="register-email" type="email" placeholder="tu@correo.com" autocomplete="email" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="phone">
                            Teléfono
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-phone"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="phone" type="tel" placeholder="Tu número de teléfono" autocomplete="tel" 
                                pattern="^[0-9+()-]*$" title="Solo números y símbolos +, (, ), -">
                        </div>
                    </div>
                    
                    <!-- Staff-only fields (hidden by default) -->
                    <div id="staff-fields" class="hidden space-y-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-2" for="position">
                                Cargo
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-briefcase"></i>
                                </span>
                                <select class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                    id="position">
                                    <option value="" disabled selected>Selecciona tu cargo</option>
                                    <option value="manager">Gerente</option>
                                    <option value="chef">Chef</option>
                                    <option value="waiter">Mesero</option>
                                    <option value="cashier">Cajero</option>
                                    <option value="delivery">Repartidor</option>
                                    <option value="other">Otro</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <i class="fas fa-chevron-down text-sm"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-2" for="employee-id">
                                ID de Empleado
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-id-card"></i>
                                </span>
                                <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                    id="employee-id" type="text" placeholder="ID proporcionado por administración">
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="register-password">
                            Contraseña
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-lock"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="register-password" type="password" placeholder="Mínimo 8 caracteres" 
                                autocomplete="new-password" required 
                                pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=\S+$).{8,}$" 
                                title="Debe contener al menos un número, una mayúscula, una minúscula, un carácter especial y sin espacios">
                            <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 focus:outline-none" id="toggle-register-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="mt-1 text-xs text-gray-500">
                            La contraseña debe tener al menos:
                            <ul class="list-disc pl-5 mt-1">
                                <li id="length-check" class="text-red-500">8 caracteres</li>
                                <li id="lowercase-check" class="text-red-500">Una letra minúscula</li>
                                <li id="uppercase-check" class="text-red-500">Una letra mayúscula</li>
                                <li id="number-check" class="text-red-500">Un número</li>
                                <li id="special-check" class="text-red-500">Un carácter especial (@#$%^&+=)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="confirm-password">
                            Confirmar contraseña
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fas fa-lock"></i>
                            </span>
                            <input class="input-field appearance-none border rounded-lg w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none" 
                                id="confirm-password" type="password" placeholder="Confirma tu contraseña" 
                                autocomplete="new-password" required>
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input class="h-4 w-4 text-green-800 focus:ring-green-500 border-gray-300 rounded" type="checkbox" id="terms" required>
                        <label class="ml-2 block text-sm text-gray-700" for="terms">
                            Acepto los <a href="#" class="text-green-800 hover:underline">términos y condiciones</a>
                        </label>
                    </div>
                    
                    <!-- reCAPTCHA v3 invisible para registro -->
                    <div id="register-recaptcha-container"></div>
                    <input type="hidden" id="register-recaptcha-token" name="recaptcha-token">
                    
                    <button type="submit" id="register-client-btn" class="btn-wild w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none">
                        <i class="fas fa-user-plus mr-2"></i>
                        Crear cuenta de cliente
                    </button>
                    
                    <button type="submit" id="register-staff-btn" class="btn-secondary hidden w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none">
                        <i class="fas fa-user-tie mr-2"></i>
                        Solicitar cuenta de personal
                    </button>
                </form>
                
                <div class="mt-6 text-center text-sm text-gray-600">
                    <p>O continúa con</p>
                    <div class="flex justify-center mt-3 space-x-4">
                        <button class="flex items-center justify-center bg-blue-600 text-white rounded-full w-10 h-10 hover:bg-blue-700 transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </button>
                        <button class="flex items-center justify-center bg-red-600 text-white rounded-full w-10 h-10 hover:bg-red-700 transition-colors">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="flex items-center justify-center bg-black text-white rounded-full w-10 h-10 hover:bg-gray-800 transition-colors">
                            <i class="fab fa-apple"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../../js/security.js"></script>
</body>
</html>